pipeline {
  agent any

  stages {
    stage('version') {
      steps {
        sh 'python3 --version'
      }
    }

    stage('getinfo') {
      steps {
        // Run the Python script using the Anaconda Python interpreter
        sh '/Users/manasvidhankani/opt/anaconda3/bin/python test.py'
      }
    }
  }

  post {
    failure {
      script {
        def jira = jiraNewIssue(
          issueType: 'Bug',
          projectKey: 'PROJ',
          summary: "Build Failure: ${env.JOB_NAME}",
          description: "A build failure occurred in ${env.JOB_NAME}.\nError message: Stage '${env.STAGE_NAME}' failed with error: ${env.ERROR_MESSAGE}",
          assignee: 'jirauser',
          components: 'Component1,Component2'
        )
        echo "Created Jira issue: ${jira.key}"
      }
    }
  }
}
